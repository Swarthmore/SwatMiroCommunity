{% extends "localtv/admin/bulk_edit.html" %}

{% load filters editable_widget uploadtemplate %}
{% block body_id %}goodies{% endblock body_id %}
{% block body_class %}playlists{% endblock body_class %}
{% block title %}Playlist: {{ playlist.name }}{% endblock %}
{% block head %}
  {{ block.super }}
  {% include "localtv/inline_edit/header.html" %}
  <script type="text/javascript" src="{% static 'localtv/js/admin/urlify.js' %}localtv/_grid/video_list.html"></script>
  </script>
  <script type="text/javascript">
      $(document).ready(function() {
          document.getElementById("id_slug").onchange = function() { this._changed = true; };
          document.getElementById("id_name").onkeyup = function() {
              var e = document.getElementById("id_slug");
              if (!e._changed) { e.value = URLify(document.getElementById("id_name").value, 50); }
          }
          $("#labels img.up, #labels img.down").each(function() {
              var that = $(this);
              var our_order = that.parent().children('input');
              that.click(function() {
                  if (this.className == 'up') {
                      our_order.val(our_order.val() - 1);
                  } else {
                      // use the weird syntax to keep JS in math mode
                      our_order.val(our_order.val() - (-1));
                  }
              });
          });
      });

</script>
{% endblock %}
{% block subheader %}{% include "localtv/goodies/header.html" %}{% endblock %}
{% block pre-labels %}
{% editable_widget playlist "info" %}
{% endblock %}
{% block labels %}
{% endblock %}

{% block massedit %}
<button id="submit_settings" type="submit" value="save all changes" class="approve_button floatright"><span>Save Changes</span></button>
<div class="bulkedit_controls">
  <select name="action" id="bulk_action_selector">
    <option value="">Bulk Actions</option>
    <option value="delete">Delete</option>
  </select>
  <button type="button" class="med_button" onclick="bulkAction();"><span>Apply</span></button>
</div>
{% endblock %}

{% block columns %}
<td valign="middle">
  <span>{{ form.instance.video.name }}</span>
  <div class="actions">
    <a href="#" class="delete_icon" onclick="return toggleDelete(this);">Delete</a> {{ form.DELETE.as_hidden }} | <a href="{{ form.instance.video.get_absolute_url }}?playlist={{ playlist.pk }}" class="view_icon">View</a>
  </div>
</td>
<td valign="middle">{{ form.ORDER }}
<img class="up" src="{% static 'localtv/images/playlist/up.png' %}" alt="Up" />
<img class="down" src="{% static 'localtv/images/playlist/down.png' %}" alt="Down" />
</td>
{% endblock %}

{% block quick-edit-fields %}
{% endblock %}
